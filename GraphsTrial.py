from openai import OpenAI

client = OpenAI(api_key = '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')
image_parent_path = "static\images"
def main():
    base_prompt = "I want you to analyze the following text content and generate relevant visualizations using Python. The text does not contain explicit numerical values, so you must analyze the content to identify patterns, trends, and topics, and then provide Python code to generate the visualizations. Use your analysis of the text to assign appropriate sizes, groupings, and values to the elements in the graph. Here is the text content:"

    response_content = f"""Unveiling the Rhythms of Puerto Rico's Political and Cultural Nexus: A Deep Dive with Juan Dalmau In the vibrant tapestry of Puerto Rican cultural and political discourse, few figures stand as prominently as Juan Dalmau, whose recent activities have sparked both criticism and dialogue across multiple arenas. This report delves into the insights gathered over the past week, shedding light on Dalmau's influential role amidst Puerto Rico's unfolding narrative, as illustrated through a diverse range of digital lenses, from music protest to legislative debates. Within the bustling corridors of Puerto Rican political engagement, Dalmau's silence following a legislative controversy has drawn striking criticism, capturing a 32% increase in online discourse as noted in sources like Metro PR. This silence is contrasted sharply by the powerful cultural protests led by artists like Bad Bunny, emphasized in figures from Rolling Stone and HuffPost, which report a 40% surge in musical protests addressing government inefficiencies and public unrest. In particular, the ongoing debate on Puerto Rico's political status, which saw a 25% increase in public sentiment towards sovereignty as reflected in several op-eds, intertwines closely with Dalmau's political positioning. As these discussions amplify, the artistic world's partnership with political personalities showcases a dynamic shift in how societal issues are addressed, with music as a catalyst for both resistance and engagement, a notable theme echoed across platforms like Yahoo News. Capturing these nuanced dynamics, this report not only chronicles the multifaceted ways in which Juan Dalmau intersects with Puerto Rican socio-political life but also emphasizes the palpable tensions and transformative potential looming over the island's future. As the narrative unfolds, readers are invited to explore deeper into how such vibrant exchanges shape the collective consciousness and potential policy shifts in Puerto Rico's evolving landscape.Juan Dalmau's Silence Sparks Controversy Amid Legislative Debate The political landscape in Puerto Rico has been recently shaken by Juan Dalmau’s notable silence concerning the legislative discussions about securing seats for minority groups. This silence has not only disappointed constituents but has also sparked intense public backlash, marking a critical moment for political accountability in the region. With politics deeply intertwined with social justice issues in Puerto Rico, Dalmau's lack of response has become a focal point in the broader conversation about the responsibilities and expectations of modern political figures. Public Backlash Over Non-Action Dalmau's inaction has rippled through social media platforms, particularly Facebook, where discourse has been overwhelmingly critical. A comprehensive analysis of the platform shows that 60% of comments referencing Dalmau express disappointment or anger. This sentiment highlights the public's growing frustration with political figures who fail to take a stand on issues perceived as morally imperative. The predominant narrative emerging from these online discussions centers on a demand for transparency and direct engagement from leaders. The online backlash can be attributed to several factors. Primarily, citizens expect their elected officials to actively engage with and address legislative issues that affect marginalized communities. Furthermore, the digital age has amplified these expectations, with social media serving as a conduit for real-time dialogue and accountability, multiplying the impact of Dalmau's silence. Comparatively, other Puerto Rican political figures have responded more robustly, engaging with the public and voicing their stances on the legislative matter. These leaders have effectively demonstrated a proactive approach that contrasts sharply with Dalmau's reticence, thereby reinforcing the declining perceptions of his leadership. Political Ramifications in Puerto Rico The implications of this controversy extend beyond immediate public sentiment, touching on the broader political ramifications within Puerto Rico. Dalmau’s silence is more than a simple lapse in communication; it signals a potential misalignment with evolving public expectations for leadership. As voters increasingly prioritize transparency and direct advocacy, this incident may well influence future electoral outcomes and political alignments in Puerto Rico. This controversy marks a pivotal moment in the trajectory of Dalmau's political career. As the leader of the Puerto Rican Independence Party, maintaining a reputation for being proactive and responsive is crucial. The repercussions of this incident could weaken his influence, not only diminishing his standing with current supporters but also jeopardizing potential future alliances. Moreover, this situation underscores a larger trend in Puerto Rican politics: leaders are now being held to higher standards of accountability and openness. This evolution is partly due to the enhanced scrutiny enabled by digital communications, which significantly amplifies public observations and reactions. Conclusion This episode in Juan Dalmau's political journey illustrates a significant shift in public expectations toward greater engagement and transparency from political leaders. The data underscores a potent public sentiment that could precipitate broader changes in the political dynamics of Puerto Rico. Therefore, it is essential for political figures to recognize and adapt to these expectations, if they wish to maintain relevance and support within a rapidly evolving sociopolitical landscape. Dalmau’s experience serves as both a cautionary tale and a call to action for leaders seeking to navigate the complexities of modern politics. As this narrative continues to unfold, it will likely have lasting implications for the political fabric of Puerto Rico, urging leaders to embrace transparency or risk losing their political foothold.The Double-Edged Sword of Moral Stances in Puerto Rican Politics The intersection of moral authority and political strategy has long been a precarious balance for leaders worldwide. In Puerto Rico, this dynamic is epitomized by recent allegations against political figure Juan Dalmau, whose handling of a situation in Venezuela has sparked accusations of double standards. These developments have garnered significant attention, particularly on digital platforms like Facebook, where public discourse is shaping the narrative. This section explores the implications of these allegations for grassroots movements and examines the broader impact on political landscapes within sensitive geopolitical contexts. Double Standards Allegations In the digital age, public figures are under near-constant scrutiny, and any perceived inconsistency can quickly become a hot topic. Juan Dalmau’s recent actions regarding the Venezuelan situation have led to accusations of double standards. Critics argue that his response has not been in line with his previously stated principles, sparking debates on platforms such as Facebook. Here, videos that discuss and dissect the issue are seeing heightened engagement rates, reflecting the public's interest in ethical consistency from their leaders. Public sentiment analysis on social media indicates a polarized audience. Approximately 63% of the conversations are critical, emphasizing the need for accountability and transparency. This disapproval is contrasted by about 27% who defend Dalmau, highlighting the challenges of navigating complex geopolitical issues. The remaining discussions are neutral, focusing on broader political procedures rather than personal assessments. Such sentiment distribution underscores the delicate nature of moral authority in politics and the potential cost of perceived hypocrisy. Impact on Grassroots Movements Grassroots movements, often the heartbeat of political momentum in Puerto Rico, are especially sensitive to narratives of integrity and consistency. These groups, which typically drive change from the bottom up, are founded on collective agreement on core values. The allegations against Dalmau risk fracturing this agreement by compromising his reliability as a leader who embodies the movement's principles. Metrics from recent grassroots gatherings suggest a noticeable decline in participation, with some events experiencing a 15% drop in attendance following the controversy. This figure highlights a potential shift in support, driven by concerns over authenticity and moral alignment. For movements that prioritize these values, Dalmau’s perceived deviation poses a critical challenge to the cohesion and direction of future efforts. Summary and Broader Implications Juan Dalmau's current situation serves as a poignant reminder of the complexity surrounding moral positions in politics. As leaders navigate the intricacies of geopolitical issues, the need for consistent ethical stances becomes paramount, especially in an era where public perception can pivot at the pace of social media discourse. Moving forward, political figures across Puerto Rico—and indeed, globally—may need to consider these dynamics more deeply, ensuring that their public and private actions align closely with stated principles. This alignment not only secures trust within supportive networks but also fortifies broader reputational integrity. As the digital landscape continues to shape political narratives, those in positions of influence must recognize the power of transparent, consistent communication to maintain the invaluable trust of grassroots supporters and the general public. This case exemplifies a broader trend where moral leadership can both empower or undermine political efficacy, depending on how authentic and consistent these stances appear to the public eye.Public Sentiment Shifts: Trust in Juan Dalmau Shaken In recent weeks, the political landscape has experienced significant ripples as trust in Juan Dalmau, a prominent political figure, has noticeably declined. This shift in public sentiment is pivotal, as it underscores the volatile nature of public trust and its implications on political stability and reputation management. The dynamics surrounding this decline offer a valuable case study in understanding and navigating the intricate fabric of public perception in the digital age. Analysis of Public Trust Central to this analysis is the sentiment analysis of online discourse, which reveals that negative commentary regarding Juan Dalmau has surged to 55%, marking a substantial increase from previous weeks. This uptick in negative sentiment cannot be overlooked, as it reflects a discontent narrative gaining traction among the public. Traditional support bases may be eroding as critiques, possibly fueled by recent political maneuvers or public statements, dominate the dialogue. In examining this trust shift, it is crucial to dissect the emotions driving these sentiments. Data indicates a mix of disappointment and disillusionment, vital indicators that suggest a breach in the social contract perceived by constituents. Emotional engagement in political discourse often precedes behavioral change, such as decreased voter turnout or allegiance switching, making this sentiment shift a critical area for intervention. Comparisons to Peers Situating Dalmau's trust metrics within the broader political context provides additional insights into the unique challenges he faces. Compared to his peers, Dalmau is trailing in public trust, as benchmarking analyses indicate that similar political figures in the region retain a relative stability in public confidence. This comparative metric suggests that external factors affecting the entire political sphere do not solely explain Dalmau's dip in trust. The implications for Dalmau's political strategy are stark. While competitors may handle routine public scrutiny more effectively, Dalmau's recent struggles highlight a potential gap in communication or policy resonance with the public. This comparative shortfall presents both a cautionary tale and an opportunity for recalibration. Lessons can be drawn from peers who maintain equilibrium amidst identical external pressures, emphasizing the necessity for agility and transparency in public relations strategies. Conclusion and Recommendations The decline in public trust towards Juan Dalmau, as evidenced by a rise in negative sentiment and lagging confidence compared to peers, presents a significant challenge. However, it also offers a roadmap for strategic refinements. Engaging directly with constituent concerns through transparent dialogue and evidence-based policy adjustments can initiate the rebuilding of trust. Furthermore, leveraging digital platforms to authentically convey messages and addressing unfounded criticisms with factual clarity are strategies that can mitigate the current negative sentiment trends. In this dynamic political age, where public trust can oscillate rapidly, proactive measures, continuous engagement, and a finger on the pulse of public sentiment can transform what is presently a setback into an opportunity for strengthening Juan Dalmau's rapport with the public.Addressing Minority Representation: Juan Dalmau's Missed Opportunities In contemporary Puerto Rican politics, the issue of minority representation has often been a touchstone for broader debates on equity and inclusion. Juan Dalmau, a prominent political figure, is at the center of such discussions, notably for his perceived passivity regarding the advocacy for legislative seats dedicated to minorities. This section explores the potential impact of Dalmau's stance, or lack thereof, on minority rights advocacy and examines the potential policy implications that may arise from this situation. Impact on Minority Rights Advocacy Historically, political advocates who actively engage in discussions around minority representation have seen tangible benefits in both public support and legislative outcomes. Dalmau, however, has encountered criticism for his limited engagement in the crucial debate over minority legislative seats. Analysts suggest that this apparent disengagement could hinder efforts to enhance minority representation in Puerto Rico’s legislative bodies, where historically, minority voices have been underrepresented. Quantitative insights from social media platforms, particularly Facebook, reveal a significant volume of public discourse centered on this issue. Data indicates a 35% increase in conversations explicitly mentioning Dalmau's name alongside topics of minority representation over the past six months. Notably, the sentiment analysis of these discussions shows a polarized view; while some users defend his strategic silence, a larger portion, approximately 60%, expresses disappointment, perceiving his inaction as a roadblock to advocacy efforts. In comparative terms, contemporaries in similar political landscapes who actively champion minority representation typically enjoy a noticeable increase in approval ratings and community support. The absence of similar advocacy from Dalmau could result in diminishing influence over minority rights discussions, thereby affecting his broader political standing and ability to mobilize support for related initiatives. Potential Policy Implications The controversy surrounding minority legislative seats and Dalmau's role, or lack thereof, in these discussions holds significant implications for future policy development in Puerto Rico. Potential legislative shifts aimed at increasing minority representation could be stymied without strong leadership and advocacy, which many believe is currently lacking in Dalmau's approach. The call for leadership in advocacy is echoed not only by activists but also by constituents who view leadership on this issue as a key determinant of effective policy change. If Dalmau fails to adapt his strategy and engage more robustly with this issue, policies that could enhance minority representation may face prolonged delays or fail to pass altogether. Moreover, this could set a precedent that undermines the very principles of equitable representation that such policies aim to foster. In terms of actionable insights, stakeholders and advocacy groups may need to reassess their engagement strategies, perhaps by fostering coalitions or more actively lobbying for policy changes independent of Dalmau’s leadership. This could involve leveraging social media platforms to galvanize public support and drive policy conversations forward despite political inertia. Concluding Thoughts Dalmau's hesitancy to fully embrace the minority rights advocacy challenge poses risks not only for his political trajectory but also for broader efforts toward equitable representation in Puerto Rico. As public discourse continues to reflect growing impatience for action, the onus is on political figures and advocacy groups to reinvigorate conversations and strategies that push for meaningful change. The balance between political strategy and genuine advocacy remains delicate, but it is a balance that must be struck to ensure that the voices of minority groups are heard and represented within the legislative framework.### Navigating Controversy: Lessons from Bad Bunny and Political Activism In the ever-evolving landscape of cultural influence and political authority, figures like Bad Bunny are redefining the contours of public engagement. His proactive approach to addressing social issues through music and public statements has resonated powerfully with younger audiences, a demographic increasingly driving societal change. This section explores the intersection of cultural and political engagement, offering insights on how political figures like Juan Dalmau might harness similar strategies to foster connection and influence. Comparative Analysis with Cultural Figures Bad Bunny’s cultural influence extends beyond his music to encompass a dynamic role in social activism. His approach is characterized by a seamless blend of entertainment and advocacy, which has been instrumental in garnering positive sentiment among audiences. A comparison with Juan Dalmau, a political figure with traditional platforms, illuminates stark contrasts in engagement strategies. Where Bad Bunny leverages platforms like social media and live performances to highlight issues such as gender equality and LGBTQ+ rights, Dalmau primarily utilizes conventional political channels. Bad Bunny’s approach is supported by quantitative insights, showing a 15% increase in social media engagement following his activism-oriented releases, as reported by entertainment publications. Meanwhile, Dalmau's engagement metrics on similar platforms remain comparatively static, indicating potential opportunities for growth if he adopts more culturally aligned strategies. This comparison underscores an evolving trend: cultural figures successfully integrate empathetic storytelling and visual expression with activism, influencing perceptions and fostering support in a manner that transcends traditional political communication. By adopting similar strategies, political figures can potentially improve their connection with diverse, younger audiences that prioritize these forms of engagement. Evolving Strategies for Political Figures For political figures aiming to engage effectively with the public, especially within younger demographics, the strategies of cultural icons like Bad Bunny offer valuable lessons. Transitioning from traditional political discourse to more innovative, culturally integrated approaches can be pivotal. One actionable insight is the strategic use of multimedia platforms to reach broader audiences. Bad Bunny’s campaigns often go viral, fueled by engaging content and strategic messaging tailored to his audience. Political figures can emulate this by creating engaging narratives through digital storytelling, interactive content, and collaborations with popular cultural influencers. Furthermore, building an authentic personal brand that resonates on a human level is crucial. Bad Bunny’s authentic engagement with social issues not only attracts media attention but also builds credibility and trust among followers. Politics can, at times, seem inaccessible; however, adopting a persona that reflects the genuine concerns of the electorate can bridge this gap, as demonstrated through Bad Bunny’s impact. Political figures must also consider the timing and relevance of their messages. Just as Bad Bunny’s activism is timely, reflecting current socio-political climates, political leaders need to address pressing issues with immediacy and relevance. This tactic not only positions them as responsive leaders but also enhances the perceived authenticity of their advocacy efforts. Conclusion: Bridging Cultural Influence and Political Authority The synergy between cultural influence and political authority is becoming increasingly evident, with figures like Bad Bunny leading the charge. His successful blend of artistry and advocacy serves as a blueprint for political figures like Juan Dalmau who seek to enhance their engagement with younger, more diverse audiences. By leveraging culturally relevant platforms and authentic engagement strategies, political leaders can reshape their approach to activism, making lasting connections with their constituents. The takeaway is clear: to navigate the current landscape of controversy and change, embracing cultural strategies that resonate with the public is no longer optional, but essential. As political dynamics continue to shift, so too must the strategies of those seeking to influence them.Predicting Future Engagement: Opportunities for Redemption In the dynamic landscape of political communication, especially amidst controversy, the ability to pivot and reshape narratives is invaluable. For Juan Dalmau, the current climate poses both challenges and opportunities. By leveraging strategic communication tactics and fostering strong public support, Dalmau has the potential to mitigate adverse sentiments and rebuild trust. Current data-driven forecasts underscore the potential of transparency and direct engagement as pivotal strategies in this effort. Strategic Communication Revamps Effective communication strategies can significantly alter public perceptions and cultivate a more favorable image. For Dalmau, this means overhauling existing communication frameworks to address current controversies head-on. Quantitative analysis of recent sentiment trends across various media platforms indicates a negative bias; however, there lies a hidden opportunity. By dissecting engagement metrics, we observe that platforms like Twitter and Facebook show specific spikes in interactions when direct communication emphasizing transparency is employed. For instance, posts clarifying policy intentions received 35% higher engagement than generic updates, a clear indication that constituents are seeking clarity and openness. Additionally, revamping communication to include consistent messaging is crucial. This approach not only ensures that the narrative remains focused but also aids in reinforcing key messages. Research highlights that consistent messaging across platforms can increase audience recall and positive sentiment by as much as 18%. Therefore, Dalmau’s team should prioritize aligning messages across all channels, ensuring that every tweet, press release, or speech shares a unified voice that speaks to authenticity and accountability. Fostering Public Support Beyond reshaping communication tactics, cultivating public support is essential. Historical data from similar political landscapes reveals that public figures who engage in active dialogue with constituents manage to recover from controversies more effectively. For Juan Dalmau, this involves not merely broadcasting messages but engaging interactively with the public. This means holding public forums, virtual town halls, and actively responding to feedback and criticism. An analysis of public engagement methods suggests that personalized responses to critiques or questions can lead to a significant shift in public perception. For example, responding to critics through well-articulated, personable messages on social media platforms can lead to a 25% reduction in negative sentiment over a three-month period. This approach not only addresses concerns directly but also humanizes the political figure, fostering an environment of mutual respect and understanding. In summary, the path to redeeming public engagement for Juan Dalmau lies in embracing transparency and open dialogue. By revamping communication strategies to focus on consistency and actively engaging with the public, there’s a tangible opportunity to shift negative perceptions. These efforts are not just reactive measures but proactive steps towards building a resilient and trusting relationship with constituents. As current forecasts predict, such strategic maneuvers could significantly bolster Dalmau’s political standing, turning current controversies into catalysts for positive transformation."""

    end_prompt = "Key Objectives: Generate a Treemap Chart: Identify key topics and categorize them based on logical divisions found in the text (e.g., actors, themes, regions). Use the prominence or frequency of topics as the relative size of the rectangles in the treemap. Group and color-code topics based on the categories you identify. Generate Additional Visualizations: Based on insights from the text, provide code for at least two additional charts (e.g., bar chart, pie chart, or word cloud). Use trends or relationships inferred from the text to create these visualizations. Output Instructions: Python Code Only: Provide just the Python code required to generate the graphs. Do not include any markdown, plain text, or explanation in the output. File Saving Instructions: Save each graph as a PNG file in the path C:\\Users\\aupad\\Downloads\\info-scrap\\static\\images\\<imagename.png> with appropriate names for each graph. No plt.show(): Do not include plt.show() in the code; only save the figures as image files. Ensure the Python code is ready to execute without modification. Also, double check the code for any errors and make sure to use exception handling so that program do not crash"

    # prompt = "Generate a bar chart visualizing the following sample data: Categories: ['Product A', 'Product B', 'Product C'] Sales: [100, 150, 80] The graph should have: Title: 'Sales Data for Products' X-axis label: 'Products' Y-axis label: 'Sales' Output Priority: Provide the graph as a .png image that I can download and view. If a .png image cannot be provided, return the just Python code needed to generate the graph. do not include any plain text or guide, just the python program, do not use plt.show() just use appropriate name to generate name of image and append with \static\images\<imagename.png>"

    prompt = base_prompt + response_content + end_prompt
    response = chat_assist("", prompt)
    cleaned_code = response.strip("```python").strip("```")
    
    print(cleaned_code)
    exec(cleaned_code)

def chat_assist(instructions, prompt):
    chat_response = client.chat.completions.create(
        model = "gpt-4o",
        messages = [
            {"role": "system", "content": instructions },
            {"role": "user", "content": prompt }
        ]
    )
    return chat_response.choices[0].message.content


if __name__ == '__main__':
    main()